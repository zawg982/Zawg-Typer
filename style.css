:root{
  --bg:#0f1720;
  --panel:#0b1220;
  --muted:#9aa4b2;
  --accent:#6dd3ff;
  --card:#0e1620;
  --glass: rgba(255,255,255,0.03);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  background:linear-gradient(180deg,#08101a 0%, #0b1722 100%);
  color:#e6eef6;
  height:100vh;
  display:flex;
  flex-direction:column;
  -webkit-font-smoothing:antialiased;
}

.topbar{
  height:56px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 14px;
  background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-bottom:1px solid rgba(255,255,255,0.03);
}

.topbar .brand{
  font-weight:700;
  letter-spacing:0.6px;
  color:var(--accent);
}

.topbar .top-actions button{
  margin-left:8px;
  background:transparent;
  border:1px solid rgba(255,255,255,0.04);
  color:var(--muted);
  padding:6px 10px;
  border-radius:6px;
  cursor:pointer;
}

#app{
  flex:1;
  display:grid;
  grid-template-columns:220px 1fr 300px;
  gap:12px;
  padding:12px;
  align-items:stretch;
  min-height:0;
}

/* sidebars */
.sidebar{
  background:var(--panel);
  border-radius:10px;
  padding:12px;
  box-shadow: 0 6px 18px rgba(2,6,23,0.6);
  overflow:auto;
}

.sidebar.left{ display:flex; flex-direction:column; gap:10px; }
.panel-title{ color:var(--muted); font-size:12px; margin-bottom:8px; text-transform:uppercase; letter-spacing:1px;}

.tool-grid{ display:grid; grid-template-columns:1fr 1fr; gap:8px; }
.tool{ background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); color:#cfeeff; padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.03); cursor:pointer; }

.quick-actions{ display:flex; flex-direction:column; gap:8px; margin-top:6px;}
.quick-actions button{ padding:8px; border-radius:6px; border:1px solid rgba(255,255,255,0.03); background:#08101a; color:var(--muted); }

.sidebar.right{ display:flex; flex-direction:column; gap:10px; }

/* workspace */
.workspace-shell{ display:flex; flex-direction:column; gap:8px; min-height:0; }
#workspaceWrap{ flex:1; display:flex; align-items:center; justify-content:center; min-height:0; position:relative; }
#rulers{ position:absolute; inset:0; pointer-events:none; }
#rulerX{ position:absolute; top:0; left:0; right:0; height:24px; background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); pointer-events:none; }
#rulerY{ position:absolute; top:0; left:0; bottom:0; width:24px; background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); pointer-events:none; }

#workspace{
  width:100%;
  max-width:1100px;
  height:calc(100vh - 200px);
  background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.03);
  position:relative;
  overflow:auto;
  display:block;
  box-shadow: 0 8px 30px rgba(2,6,23,0.6);
}

/* Grid overlay */
#grid{
  position:absolute;
  inset:0;
  background-image:
    linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.015) 1px, transparent 1px);
  background-size: 20px 20px, 20px 20px;
  display:none;
  pointer-events:none;
}

/* elements (divs) */
.el{
  position:absolute;
  box-sizing:border-box;
  touch-action:none;
  user-select:none;
  transform-origin:center center;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:visible;
}

.el .label{
  pointer-events:none;
  font-size:14px;
  color:#071226;
}

.el .img{
  width:100%; height:100%; object-fit:contain; display:block;
}

/* selection rectangle */
.el.selected{
  outline:2px dashed rgba(109,211,255,0.7);
  z-index:1000;
}

/* resize handles */
.handle{
  position:absolute;
  width:10px;height:10px;border-radius:2px;background:var(--accent);
  border:1px solid rgba(0,0,0,0.2);
  box-shadow:0 2px 4px rgba(0,0,0,0.3);
  touch-action:none;
}

.handle.nw{ left:-6px; top:-6px; cursor:nwse-resize; }
.handle.ne{ right:-6px; top:-6px; cursor:nesw-resize; }
.handle.sw{ left:-6px; bottom:-6px; cursor:nesw-resize; }
.handle.se{ right:-6px; bottom:-6px; cursor:nwse-resize; }
.handle.n{ left:50%; top:-6px; transform:translateX(-50%); cursor:ns-resize; }
.handle.s{ left:50%; bottom:-6px; transform:translateX(-50%); cursor:ns-resize; }
.handle.w{ left:-6px; top:50%; transform:translateY(-50%); cursor:ew-resize; }
.handle.e{ right:-6px; top:50%; transform:translateY(-50%); cursor:ew-resize; }

/* rotation handle */
.rotate-handle{
  position:absolute; left:50%; top:-36px; transform:translateX(-50%);
  width:14px;height:14px;border-radius:50%;background:#fff;border:1px solid #ccc; cursor:grab;
}

/* statusbar */
.statusbar{ display:flex; justify-content:space-between; gap:10px; padding:6px 12px; color:var(--muted); font-size:13px; }

/* properties */
#properties{ display:flex; flex-direction:column; gap:8px; }
.prop-row{ display:flex; gap:8px; align-items:center; }
.prop-row label{ width:70px; color:var(--muted); font-size:13px; }
.prop-row input, .prop-row select{ flex:1; padding:6px; border-radius:6px; border:1px solid rgba(255,255,255,0.03); background:transparent; color:#dbeafe; }

.prop-actions{ display:flex; gap:8px; margin-top:8px; }
.prop-actions button{ flex:1; padding:8px; border-radius:6px; background:linear-gradient(180deg,#0b2330,#081a24); border:1px solid rgba(255,255,255,0.03); color:var(--muted); }

/* layers */
#layers{ display:flex; flex-direction:column; gap:6px; margin-top:8px; }
.layer-item{ display:flex; align-items:center; gap:6px; padding:8px; border-radius:6px; background:rgba(255,255,255,0.01); cursor:pointer; }
.layer-item .name{ flex:1; color:var(--muted); }
.layer-item .eye{ opacity:0.7; }

/* small screens */
@media (max-width:980px){
  #app{ grid-template-columns:1fr; grid-template-rows:auto 1fr auto; padding:8px; }
  .sidebar.left, .sidebar.right{ order:3; width:100%; }
  .workspace-shell{ order:2; }
}
